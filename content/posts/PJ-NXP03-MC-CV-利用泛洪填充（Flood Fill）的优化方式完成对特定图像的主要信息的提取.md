---
title: 利用泛洪填充（Flood Fill）的优化方式完成对特定图像的主要信息的提取
tags:
  - 单片机
  - 计算机视觉
categories:
  - 项目
  - nxp-smart-car
thumbnailImage: https://dynais-imh-hub.oss-cn-hangzhou.aliyuncs.com/img/20200725003554.png
thumbnailImagePosition:
coverImage: https://dynais-imh-hub.oss-cn-hangzhou.aliyuncs.com/img/20200725004705.jpg
coverMeta: in
coverSize: partial
metaAlignment: center
abbrlink: da06c78d
date: 2019-12-09 00:00:00
---

 小车已经全部搭好了，虽然不确定硬件是否哪里还有些问题，但是好歹摄像头和图像处理模块是已经可以正常使用没有问题的。

已经写好的二值化算法已经够用了，但是仍然存在不可以过滤背景中无效信息的问题，多多少少会给之后的计算带来麻烦，于是写了一个提取图像主要信息的算法。

<!-- excerpt -->

**前言：**

小车已经全部搭好了，虽然不确定硬件是否哪里还有些问题，但是好歹摄像头和图像处理模块是已经可以正常使用没有问题的。

已经写好的二值化算法已经够用了，但是仍然存在不可以过滤背景中无效信息的问题，多多少少会给之后的计算带来麻烦，于是写了一个提取图像主要信息的算法。

--------------------------

# 利用泛洪填充（Flood Fill）的优化方式完成对特定图像的主要信息的提取

### 完成目标：

**处理前**

[图像已丢失]

**处理后**

[图像已丢失]

[^]: 使用OpenCV模拟，非真实图像

可以观察到，背景中多余的信息被算法过滤掉了。



## 思路

这种算法大概的思路相当于画图软件中的油漆桶，选取一个目标点并使用DFS来选出区域内所有和他连通并且颜色相同的像素点，这样根据智能车行驶路径的特点可知捕捉到的画面下方正中间的位置必然是属于白色的，借此就可以只选出当前赛道的图像，并同时纪录下左右边线。

<!-- more -->



## 问题与解决方案

### 1.内存占用过大

首先遇到的问题就是，如果使用原始的算法，只要图像稍微很大，就需要一个非常大的数组来进行信息的储存。甚至在使用PC进行模拟的时候，都因为内存过大而产生溢出了，所以说如此大的内存消耗对LPC来说是不可接受的。

**解**

简单思路是把原来的对像素堆栈改为了对扫描线种子点的堆栈，大大减小了内存的消耗，具体的算法在参考文献中列出。



### 2.数据类型使用错误/不匹配

转移算法的时候出现好几处警告，提示数据类型与逻辑判断可能出现问题，比如 uint8 和 0 比大小，这个运算的结果一定是 uint8 大于 0 的，当 uint类型 “小于” 0 时，他会变为一个很大的数字。并且 uint 与传统 int 进行数学运算的时候也一定要小心，最好避免这种情况，提前转化为相同类型数据再运算。





--------------------------

**参考文献:**

[1]: https://www.cnblogs.com/jenayfighting/p/5117648.html	"基于扫描种子线算法的多边形区域填充实现"

